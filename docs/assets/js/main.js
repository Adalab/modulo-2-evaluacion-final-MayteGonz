"use strict";const inputSearch=document.querySelector(".js-search"),btnSearch=document.querySelector(".btn-search"),sectionSearch=document.querySelector(".js-sectionSearch"),sectionFav=document.querySelector(".js-sectionFavorites"),preMovies=document.querySelector(".js-recomendedMovies"),url="https://api.tvmaze.com/search/shows?q=",url2="https://api.tvmaze.com/search/shows?q=girls";let moviesFound=[],moviesFavs=[];const moviesLS=JSON.parse(localStorage.getItem("movies")),moviesFavsLS=JSON.parse(localStorage.getItem("moviesFavs"));function renderPreMovies(){null!==moviesFavsLS&&(moviesFavs=moviesFavsLS,renderMovieList(moviesFavs,sectionFav)),null!==moviesLS?(moviesFound=moviesLS,renderMovieList(moviesFound,sectionSearch)):fetch(url2).then(e=>e.json()).then(e=>{moviesFound=e,renderMovieList(moviesFound,sectionSearch),localStorage.setItem("movies",JSON.stringify(moviesFound)),preMovies.innerHTML="Algunas peliculas recomendadas para tÃ­"})}function requestMovies(){const e=inputSearch.value;fetch(url+e).then(e=>e.json()).then(s=>{0===s.length?(preMovies.innerHTML="Prueba a buscar de nuevo =(",sectionSearch.innerHTML=""):(preMovies.innerHTML="Esto es lo que hemos encontrado: ",moviesFound=s,renderMovieList(moviesFound,sectionSearch)),""===e&&(renderPreMovies(),preMovies.innerHTML="")})}function renderOneMovie(e){const s=document.createElement("article");s.classList.add("card"),s.classList.add("js-card"),s.setAttribute("id",e.show.id);const o=document.createElement("h3");o.classList.add("titleMovie"),o.textContent=e.show.name;const n=document.createElement("img");return n.alt="Imagen de portada de la peli "+e.show.name,e.show.image?n.src=e.show.image.medium:n.src="./assets/images/placeholderMovie.jpg",n.classList.add("imgMovie"),s.appendChild(o),s.appendChild(n),s}function renderMovieList(e,s){s.innerHTML="";for(const o of e)s.appendChild(renderOneMovie(o));addEventCardMovie()}function handleClickSearch(e){e.preventDefault(),requestMovies()}function handleClickMovie(e){const s=parseInt(e.currentTarget.id);let o=moviesFound.find(e=>e.show.id===s);const n=moviesFavs.findIndex(e=>e.show.id===s);-1===n?moviesFavs.push(o):moviesFavs.splice(n,1),renderMovieList(moviesFavs,sectionFav),localStorage.setItem("moviesFavs",JSON.stringify(moviesFavs))}function addEventCardMovie(){const e=document.querySelectorAll(".js-card");for(const s of e)s.addEventListener("click",handleClickMovie)}btnSearch.addEventListener("click",handleClickSearch),renderPreMovies();